(function(){"use strict";importScripts("/lamejs.js"),self.onmessage=l=>{const{channels:f,sampleRate:h,left:t,right:r}=l.data;try{const e=new lamejs.Mp3Encoder(f,h,128),n=[],o=1152*40;for(let s=0;s<t.length;s+=o){const p=t.subarray(s,s+o),u=r?r.subarray(s,s+o):void 0,c=e.encodeBuffer(p,u);c.length>0&&n.push(c);const g=Math.round(s/t.length*100);self.postMessage({progress:g})}const a=e.flush();a.length>0&&n.push(a),self.postMessage({mp3Data:n})}catch(e){self.postMessage({error:String(e)})}}})();
